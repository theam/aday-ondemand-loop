<% content_for :title, t('zenodo.records.show.page_title') %>
<div class="zenodo container-md content" role="main">
  <%= render partial: '/shared/breadcrumbs', locals: { links: [{text: t('shared.breadcrumbs.zenodo'), url: view_zenodo_landing_path}, {text: @record.title}]} %>

  <div class="card">
    <div class="card-header"><%= @record.title %></div>
    <div class="card-body">
      <%= form_with url: download_zenodo_record_files_path, local: true do |f| %>
        <%= hidden_field_tag 'project_id', Current.settings.user_settings.active_project %>
        <%= hidden_field_tag :id, @record_id %>
        <table class="table">
          <thead>
            <tr>
              <th></th>
              <th><%= t('zenodo.records.show.column_record_filename_text') %></th>
              <th><%= t('zenodo.records.show.column_record_size_text') %></th>
            </tr>
          </thead>
          <tbody>
          <% @record.files.each do |file| %>
            <tr>
              <td><input type="checkbox" name="file_ids[]" value="<%= file.id %>"></td>
              <td><%= file.filename %></td>
              <td><%= number_to_human_size(file.filesize) %></td>
            </tr>
          <% end %>
          </tbody>
        </table>
        <%= submit_tag t('zenodo.records.show.button_submit_text'), class: 'btn btn-primary' %>
      <% end %>
    </div>
  </div>
</div>
