<%= form_with url: project_upload_bundle_path(upload_bundle.project_id, upload_bundle.id), method: :put, data: { action: "submit->modal#showSpinner" }, local: true do |f| %>
  <%= hidden_field_tag :form, 'connector_edit' %>
  <%= hidden_field_tag :anchor, tab_anchor_for(upload_bundle) %>

  <div class="mb-3">
    <%= f.label :api_key, t('connectors.dataverse.connector_edit_form.field_api_key_label'), class: 'form-label fw-bold' %>
    <%= f.text_field :api_key, value: upload_bundle.connector_metadata.api_key&.value, class: 'form-control', placeholder: t('connectors.dataverse.connector_edit_form.field_api_key_placeholder'), required: true %>
    <div class="form-text"><%= t('connectors.dataverse.connector_edit_form.field_api_key_help') %></div>
  </div>

  <div class="mb-3 form-check">
    <%= f.check_box :key_scope, { class: 'form-check-input', checked: upload_bundle.connector_metadata.api_key&.collection? }, 'bundle', 'server' %>
    <%= f.label :key_scope, t('connectors.dataverse.connector_edit_form.field_key_scope_label'), class: 'form-check-label' %>
    <div class="form-text"><%= t('connectors.dataverse.connector_edit_form.field_key_scope_help') %></div>
  </div>

  <div class="d-flex justify-content-end gap-2">
    <button type="submit" class="btn btn-sm btn-primary">
      <i class="bi bi-save-fill me-1"></i> <%= t('connectors.dataverse.connector_edit_form.submit') %>
    </button>
    <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-dismiss="modal">
      <%= t('connectors.dataverse.connector_edit_form.cancel') %>
    </button>
  </div>
<% end %>

