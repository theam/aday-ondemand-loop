<% file_browser_id = project_download_dir_browser_id(project) %>
<div class="card mb-3 shadow-sm rounded overflow-hidden">
  <div class="card-header bg-light-darker">
    <div class="d-flex justify-content-between align-items-center py-2">
      <div class="d-flex align-items-center gap-3 me-2">
        <!-- open workspace folder -->
        <a href="<%= files_app_url(project.download_dir) %>"
           target="_blank"
           class="btn btn-sm btn-outline-secondary"
           aria-label="<%= t('.button_open_downloads_folder_title') %>"
           title="<%= t('.button_open_downloads_folder_title') %>">
          <i class="bi bi-folder-fill" aria-hidden="true"></i>
          <span class="visually-hidden"><%= t('.button_open_downloads_folder_title') %></span>
        </a>

        <div class="d-flex flex-column">
          <h3 class="mb-0 h5"><%= t('.header_download_files_text') %></h3>
          <small class="text-muted"><%= project.download_dir %></small>
        </div>
      </div>

      <!-- edit workspace folder -->
      <div data-controller="project-download-dir"
           data-project-download-dir-browser-id-value="<%= file_browser_id %>">
        <button type="button" class="btn btn-sm btn-outline-secondary"
                data-controller="lazy-loader"
                data-lazy-loader-container-id-value="<%= file_browser_id %>"
                data-lazy-loader-url-value="<%= file_browser_path(path: project.download_dir) %>"
                data-action="click->lazy-loader#load click->project-download-dir#open"
                title="<%= t('.button_edit_download_dir_title') %>"
                aria-label="<%= t('.button_edit_download_dir_label') %>">
          <i class="bi bi-pencil-square" aria-hidden="true"></i>
          <span class="visually-hidden"><%= t('.button_edit_download_dir_label') %></span>
        </button>
        <%= render partial: '/projects/show/edit_download_dir_modal', locals: { project: project, file_browser_id: file_browser_id } %>
      </div>
    </div>

    <hr class="m-0">

    <div class="d-flex justify-content-between align-items-center py-2">
      <div class="me-4">
        <%= render partial: '/shared/file_summary_widget', locals: project_progress_data(project.status_summary) %>
      </div>

      <button data-controller="utils--icon-toggle"
              data-utils--icon-toggle-icon-on-value="bi-plus-square-fill"
              data-utils--icon-toggle-icon-off-value="bi-dash-square-fill"
              data-action="click->utils--icon-toggle#toggle"
              data-bs-toggle="collapse"
              data-bs-target="#download-repo-resolver"
              title="<%= t('.button_add_files_title') %>"
              aria-label="<%= t('.button_add_files_text') %>"
              role="button"
              aria-expanded="false"
              aria-controls="download-repo-resolver"
              class="btn btn-outline-secondary btn-sm">
        <i data-utils--icon-toggle-target="icon" class="bi bi-plus-square-fill" aria-hidden="true"></i>
        <span class="ps-1"><%= t('.button_add_files_text') %></span>
      </button>
    </div>
  </div>
</div>
